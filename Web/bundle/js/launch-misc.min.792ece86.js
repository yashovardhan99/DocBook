(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";module.exports={init:init};var _config,_$calculatorHalfLife,_$calculatorConversion,_currentConverter,Package={Config:window.DDC.Config,Debug:window.DDC.Debug,Helper:window.DDC.Helper},_converterMatrix={temperature:{method:addition,options:[{name:"Celsius",symbol:"&deg;C",valueToBase:0},{name:"Fahrenheit",symbol:"&deg;F",customMethodToBase:fahrenheitToCelcius,customMethodFromBase:celciusToFahrenheit},{name:"Kelvin",symbol:"K",valueToBase:-273.15}]},volume:{method:multiplication,options:[{name:"Litre",symbol:"L",valueToBase:.001},{name:"Millilitre",symbol:"L",valueToBase:1e-6},{name:"US Gallon",symbol:"US gal",valueToBase:.00378541},{name:"US Quart",symbol:"US qt",valueToBase:.0009463525},{name:"US Pint",symbol:"US pt",valueToBase:.00047317625},{name:"US Cup",symbol:"US cup",valueToBase:.000236588125},{name:"US Fluid Ounce",symbol:"US fl oz",valueToBase:29573515625e-15},{name:"US Tablespoon",symbol:"US tblsp",valueToBase:147867578125e-16},{name:"US Teaspoon",symbol:"US tsp",valueToBase:4928919270833333e-21},{name:"UK Gallon",symbol:"UK gal",valueToBase:.00454609},{name:"UK Quart",symbol:"UK qt",valueToBase:.0011365225},{name:"UK Pint",symbol:"UK pt",valueToBase:.00056826125},{name:"UK Fluid Ounce",symbol:"UK fl oz",valueToBase:284130625e-13},{name:"UK Tablespoon",symbol:"UK tblsp",valueToBase:177581640625e-16},{name:"UK Teaspoon",symbol:"UK tsp",valueToBase:5919388020833334e-21},{name:"Cubic Metre",symbol:"m&sup3;",valueToBase:1},{name:"Cubic Centimetre",symbol:"cm&sup3;",valueToBase:1e-6},{name:"Cubic Millimetre",symbol:"mm&sup3;",valueToBase:1e-9},{name:"Cubic Yard",symbol:"yd&sup3;",valueToBase:.764554857984},{name:"Cubic Foot",symbol:"ft&sup3;",valueToBase:.028316846592},{name:"Cubic Inch",symbol:"in&sup3;",valueToBase:16387064e-12}]},weight:{method:multiplication,options:[{name:"Kilogram",symbol:"kg",valueToBase:1},{name:"Gram",symbol:"g",valueToBase:.001},{name:"Milligram",symbol:"mg",valueToBase:1e-6},{name:"Pound",symbol:"lb",valueToBase:.453592},{name:"Ounce",symbol:"oz",valueToBase:.0283495}]}};function init(){Package.Debug.trace("DDC.Calculator.init"),(_config=Package.Config.get(["widget","calculator"]))&&(_config.halfLife&&_config.halfLife.selector&&initHalfLifeCalculator(),_config.conversion&&_config.conversion.selector&&initConversionCalculator())}function initHalfLifeCalculator(){Package.Debug.trace("DDC.Calculator.initHalfLife"),_config.halfLife.resultSize||(_config.halfLife.resultSize=8),(_$calculatorHalfLife=$(_config.halfLife.selector)).on("click","[data-action-calculate]",calculateHalfLife),_$calculatorHalfLife.on("change","[data-field-value], [data-field-unit]",hideResults),$(window).on("hashchange",hashChanged),hashChanged()}function calculateHalfLife(){Package.Debug.trace("DDC.Calculator.calculateHalfLife");var a=getHalfLifeFieldData("dosage"),e=getHalfLifeFieldData("halflife");if(e.value){for(var o=_$calculatorHalfLife.find("[data-field-result]"),l=0;l<_config.halfLife.resultSize;l++){var t=a.value/Math.pow(2,l),n=e.value*l;$("[data-time="+l+"]").text(formatTime(n,e.unit)),$("[data-dosage="+l+"]").text(formatDosage(t,a.unit))}o.show();var i=$("html,body");i.animate({scrollTop:o.offset().top-i.offset().top+o.scrollTop()},600)}}function hideResults(){Package.Debug.trace("DDC.Calculator.hideResults"),_$calculatorHalfLife.find("[data-field-result]").hide()}function formatDosage(a,e){return Package.Debug.trace("DDC.Calculator.formatDosage",a,e),a.toFixed(2)+" "+e}function formatTime(a,e){switch(Package.Debug.trace("DDC.Calculator.formatTime",a,e),e){case"mins":a>=60&&(a/=60,e="hrs");break;case"hrs":a>=24&&(a/=24,e="days")}return 1===a&&(e=e.slice(0,-1)),a.toFixed(2)+" "+e}function hashChanged(){Package.Debug.trace("DDC.Calculator.hashChanged"),setHalfLife(Package.Helper.getHashParameter("halflife")),calculateHalfLife()}function setHalfLife(a){if(Package.Debug.trace("DDC.Calculator.setHalfLife"),a=parseFloat(a),isNaN(a)&&(a=0),a){var e=a,o="hrs";e>=24?(e/=24,o="days"):e<1&&(e*=60,o="mins"),e=e.toFixed(2),_$calculatorHalfLife.find('[data-field="halflife"] [data-field-value]').val(e),_$calculatorHalfLife.find('[data-field="halflife"] [data-field-unit]').val(o)}}function getHalfLifeFieldData(a){Package.Debug.trace("DDC.Calculator.getHalfLifeFieldData");var e=_$calculatorHalfLife.find('[data-field="'+a+'"]'),o={value:parseFloat(e.find("[data-field-value]").val()),unit:e.find("[data-field-unit]").val()};return isNaN(o.value)&&(o.value=0),o}function initConversionCalculator(){Package.Debug.trace("DDC.Calculator.initConversion");var a=(_$calculatorConversion=$(_config.conversion.selector)).find("[data-tab-active]"),e=a.attr("data-tab-active");setType(a.find('[data-tab-item="'+e+'"] a').attr("data-type")),_$calculatorConversion.on("click","[data-action-calculate]",calculateConversionFromTo),_$calculatorConversion.on("change","[data-field-unit]",calculateConversionFromTo),_$calculatorConversion.on("blur",'[data-field="from"] [data-field-value]',calculateConversionFromTo),_$calculatorConversion.on("blur",'[data-field="to"] [data-field-value]',calculateConversionToFrom),_$calculatorConversion.on("focus","[data-field-value]",clearConversion),_$calculatorConversion.on("click","[data-action-change-type]",conversionChangeType),_$calculatorConversion.on("click","[data-action-switch]",conversionSwitch)}function addition(a,e){return Package.Debug.trace("DDC.Calculator.addition"),a+e}function multiplication(a,e){return Package.Debug.trace("DDC.Calculator.multiplication"),a*e}function fahrenheitToCelcius(a){return Package.Debug.trace("DDC.Calculator.fahrenheitToCelcius"),5/9*(a-32)}function celciusToFahrenheit(a){return Package.Debug.trace("DDC.Calculator.celciusToFahrenheit"),1.8*a+32}function calculateConversionFromTo(){Package.Debug.trace("DDC.Calculator.calculateConversionFromTo"),calculateConversion("from","to")}function calculateConversionToFrom(){Package.Debug.trace("DDC.Calculator.calculateConversionToFrom"),calculateConversion("to","from")}function clearConversion(){Package.Debug.trace("DDC.Calculator.clearConversion"),_$calculatorConversion.find("[data-field-value]").val("")}function calculateConversion(a,e){Package.Debug.trace("DDC.Calculator.calculateConversion");var o=_$calculatorConversion.find('[data-field="'+a+'"] [data-field-unit]')[0],l=_$calculatorConversion.find('[data-field="'+e+'"] [data-field-unit]')[0],t={from:_currentConverter.options[o.selectedIndex],to:_currentConverter.options[l.selectedIndex]},n={toBase:t.from.customMethodToBase||_currentConverter.method,fromBase:t.to.customMethodFromBase||_currentConverter.method},i=_$calculatorConversion.find('[data-field="'+a+'"] [data-field-value]'),c=parseFloat(i.val());isNaN(c)&&(c=0,i.val(c));var r=t.to.valueToBase;n.fromBase===addition?r*=-1:n.fromBase===multiplication&&(r=1/r);var u=n.toBase(c,t.from.valueToBase),s=2;(u=n.fromBase(u,r))?u<1&&(s=4):s=0,u=u.toFixed(s),_$calculatorConversion.find('[data-field="'+e+'"] [data-field-value]').val(u)}function conversionChangeType(a){Package.Debug.trace("DDC.Calculator.conversionChangeType"),a.preventDefault(),a.stopPropagation(),setType($(a.currentTarget).attr("data-type"))}function setType(a){if(Package.Debug.trace("DDC.Calculator.setType"),a){var e=(_currentConverter=_converterMatrix[a]).options,o={$from:_$calculatorConversion.find('[data-field="from"] [data-field-unit]'),$to:_$calculatorConversion.find('[data-field="to"] [data-field-unit]')};o.$from.html(""),o.$to.html(""),e.forEach(function(a){o.$from.append($("<option>",{html:a.name})),o.$to.append($("<option>",{html:a.name}))}),calculateConversionFromTo()}}function conversionSwitch(){Package.Debug.trace("DDC.Calculator.conversionSwitch");var a={from:_$calculatorConversion.find('[data-field="from"] [data-field-unit]')[0],to:_$calculatorConversion.find('[data-field="to"] [data-field-unit]')[0]},e=a.from.selectedIndex;a.from.selectedIndex=a.to.selectedIndex,a.to.selectedIndex=e,calculateConversionFromTo()}

},{}],2:[function(require,module,exports){
"use strict";module.exports={init:init};var _$carousel,_$seats,Package={Debug:window.DDC.Debug};function init(){Package.Debug.trace("DDC.Carousel.init"),_$carousel=$(".ddc-carousel ul"),_$seats=$(".ddc-carousel li"),$(".ddc-carousel button").on("click",change)}function change(e){Package.Debug.trace("DDC.Carousel.change");var a=getTarget(e);a.addClass("is-ref").css("order",1);for(var r=2;r<=_$seats.length;r++)a=next(a).css("order",r);_$carousel.removeClass("is-set"),setTimeout(function(){_$carousel.addClass("is-set")},50)}function getTarget(e){Package.Debug.trace("DDC.Carousel.getTarget");var a=$(e.currentTarget),r=$(".is-ref").removeClass("is-ref");return"next"===a.data("direction")?(_$carousel.removeClass("is-reversing"),next(r)):(_$carousel.addClass("is-reversing"),prev(r))}function next(e){return Package.Debug.trace("DDC.Carousel.next"),e.next().length?e.next():_$seats.first()}function prev(e){return Package.Debug.trace("DDC.Carousel.prev"),e.prev().length?e.prev():_$seats.last()}

},{}],3:[function(require,module,exports){
"use strict";module.exports={init:init};var _config,Package={Config:window.DDC.Config,Debug:window.DDC.Debug};function init(){Package.Debug.trace("DDC.PillId.init"),(_config=Package.Config.get(["pillid"]))&&(_config.gallery?$(".pid-switch-nav a").on("click",handleSwitchRequest):$(".pid-switch-nav").remove(),_config.shapes&&_config.shapes.target&&$(_config.shapes.target).on("mousedown",showShapes))}function handleSwitchRequest(e){Package.Debug.trace("DDC.PillId.handleSwitchRequest"),e.preventDefault(),e.stopPropagation();var a=$(e.currentTarget),t=a.closest("[data-pid-imprintid]"),i=getImagesForImprint(parseInt(t.attr("data-pid-imprintid")));i.length>1&&switchImage(t,i,a.attr("data-pid-direction"))}function getImagesForImprint(e){return Package.Debug.trace("DDC.PillId.getImagesForImprint",e),_config.gallery&&_config.gallery.length&&_config.gallery.find(function(a){return a.imprintId===e}).images||[]}function switchImage(e,a,t){Package.Debug.trace("DDC.PillId.switchImage",t);var i=updateIndex(e,t,0,a.length-1);if(a[i]){var n=e.find("[data-pid-image]");n.css("background-image","url("+a[i].path+")"),n.find("img").attr("src",a[i].path),a[i].cssClass&&n.addClass(a[i].cssClass)}}function updateIndex(e,a,t,i){Package.Debug.trace("DDC.PillId.updateIndex",a,t,i);var n=e.find("[data-pid-index]"),d=parseInt(n.text())-1;return"prev"===a?d--:d++,d=Math.min(Math.max(d,t),i),e.find("[data-pid-direction=prev]").toggleClass("pid-arrow-disable",d===t),e.find("[data-pid-direction=next]").toggleClass("pid-arrow-disable",d===i),n.text(d+1),d}function showShapes(e){Package.Debug.trace("DDC.PillId.showShapes"),e.preventDefault(),e.stopPropagation();var a=$("#"+_config.shapes.modalId);a.length||(a=$("<div id='"+_config.shapes.modalId+"' style='display: none;' />"),$.ajax(_config.shapes.apiUrl).done(function(e){a.html(e),a.on("mousedown","[data-shape-id]",selectShape)}),$(e.currentTarget).after(a).closest("div").css({position:"relative"})),a.toggle(),window.setTimeout(function(){$(document).on("mousedown",hideShapes)},50)}function hideShapes(){Package.Debug.trace("DDC.PillId.hideShapes"),$("#"+_config.shapes.modalId).hide(),$(document).off("mousedown",hideShapes)}function selectShape(e){Package.Debug.trace("DDC.PillId.selectShape"),e.preventDefault();var a=$(e.currentTarget).attr("data-shape-id");$(_config.shapes.target).val(a)}

},{}],4:[function(require,module,exports){
"use strict";var Package={Calculator:require("ddc-calculator"),Carousel:require("ddc-carousel"),PillId:require("ddc-pill-id")};window.DDC=window.DDC||{},Package.Calculator.init(),Package.Carousel.init(),Package.PillId.init();

},{"ddc-calculator":1,"ddc-carousel":2,"ddc-pill-id":3}]},{},[4]);
